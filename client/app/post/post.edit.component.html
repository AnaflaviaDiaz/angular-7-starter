<app-toast [message]="toast.message"></app-toast>
<div class="container my-4">
  <div class="text-center">
    <app-loading [condition]="isLoading"></app-loading>
  </div>
  <div class="card">
    <h5 class="card-header" *ngIf="!isEditing"><i class="fa fa-plus fa-fw"></i> Create new post</h5>
    <h5 class="card-header" *ngIf="isEditing"><i class="fa fa-pencil fa-fw"></i> Edit post</h5>
    <div class="card-body">
      <form [formGroup]="editPostForm" (ngSubmit)="editPost()">
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" class="form-control" name="title" formControlName="title" id="title">
        </div>
        <div class="form-group">
          <label>Tags</label>
          <ng-select [items]="tags"
                     bindLabel="name"
                     placeholder="Select tags"
                     [typeahead]="typeahead"
                     [multiple]="true"
                     clearAllText="Clear"
                     formControlName="tags">
          </ng-select>
        </div>
        <div class="form-group">
          <label for="content">Content</label>
          <div [froalaEditor]="options" formControlName="content" name="content" id="content">Hello, Froala!</div>
        </div>
        <div *ngIf="!isEditing" class="text-right">
          <button type="button" class="btn btn-sm btn-link mr-2" *ngIf="!isEditing" (click)="cancelAdding()">
            Cancel
          </button>
          <button type="button" class="btn btn-sm btn-primary" (click)="addPost()" [disabled]="!editPostForm.valid">
            Save
          </button>
        </div>
        <div *ngIf="isEditing" class="text-right">
          <button type="button" class="btn btn-sm btn-link " (click)="cancelEditing()">
            Cancel
          </button>
          <button type="button" class="btn btn-sm btn-danger " (click)="deletePost(post)">
            Delete
          </button>
          <button type="button" class="btn btn-sm btn-primary " (click)="editPost()" [disabled]="!editPostForm.valid">
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
